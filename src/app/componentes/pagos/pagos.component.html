<app-header></app-header>
<div class="configuracion">
  <div class="sidebar">
    <a href="/ajustes/perfil">Perfil</a>
    <a class="selected" href="/ajustes/pagos">Pagos</a>
  </div>
  <div class="container">
    <div class="container">
      <h2 *ngIf="!planUsuario">Pagar Suscripción Premium</h2>
      <hr *ngIf="!planUsuario">
    </div>

    <form *ngIf="!planUsuario" (submit)="pagar()">
      <div class="form-group">
        <label for="nombre">Nombre</label>
        <input id="nombre" [(ngModel)]="nombre" class="form-control" name="nombre" type="text" required>
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input id="email" [(ngModel)]="email" class="form-control" name="email" type="email" required>
      </div>
      <div class="form-group">
        <label for="direccion">Dirección</label>
        <input id="direccion" [(ngModel)]="direccion.line1" class="form-control" name="line1" type="text" required>
      </div>
      <div class="form-group">
        <label for="ciudad">Ciudad</label>
        <input id="ciudad" [(ngModel)]="direccion.city" class="form-control" name="city" type="text" required>
      </div>
      <div class="form-group">
        <label for="estado">Estado</label>
        <input id="estado" [(ngModel)]="direccion.state" class="form-control" name="state" type="text" required>
      </div>
      <div class="form-group">
        <label for="codigoPostal">Código Postal</label>
        <input id="codigoPostal" [(ngModel)]="direccion.postal_code" class="form-control" name="postal_code" type="text" required>
      </div>
      <div id="card-element" class="form-control"></div>
      <br>
      <button type="submit" class="btn-submit">Pagar</button>
    </form>

    <div *ngIf="planUsuario">
      <h2>Detalles del Plan</h2>
      <hr>
      <p><strong>Plan:</strong> {{ planUsuario.plan }}</p>
      <p><strong>Método de Pago:</strong> {{ planUsuario.metodo_de_pago }}</p>
      <p><strong>Fecha de Inicio:</strong> {{ planUsuario.fecha_inicio | date }}</p>
      <p><strong>ID de Suscripción:</strong> {{ planUsuario.suscripcion_id }}</p>
      <button (click)="bajaPlan()" class="btn btn-danger">Dar de baja el plan Premium</button> 

    </div>
  </div>
</div>
