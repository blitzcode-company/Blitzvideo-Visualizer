<h2 mat-dialog-title>
  <mat-icon>flag</mat-icon>
  Reportar usuario
</h2>

<mat-dialog-content class="report-content">
  <form (ngSubmit)="enviarReporteUsuario()" #reportForm="ngForm" class="report-form">

    <!-- Opciones -->
    <div class="report-options">
      <mat-checkbox [(ngModel)]="reporte.ciberacoso" name="ciberacoso">
        Ciberacoso
      </mat-checkbox>

      <mat-checkbox [(ngModel)]="reporte.privacidad" name="privacidad">
        Violaci칩n de privacidad
      </mat-checkbox>

      <mat-checkbox [(ngModel)]="reporte.suplantacion_identidad" name="suplantacion_identidad">
        Suplantaci칩n de identidad
      </mat-checkbox>

      <mat-checkbox [(ngModel)]="reporte.amenazas" name="amenazas">
        Amenazas
      </mat-checkbox>

      <mat-checkbox [(ngModel)]="reporte.incitacion_odio" name="incitacion_odio">
        Incitaci칩n al odio
      </mat-checkbox>

      <mat-checkbox 
        [(ngModel)]="reporte.otros" 
        name="otros"
        (ngModelChange)="onOtrosChange($event)"
      >
        Otros
      </mat-checkbox>
    </div>

    <mat-form-field appearance="outline" class="full-width" *ngIf="mostrarDetalle">
      <mat-label>Describe el problema</mat-label>
      <textarea 
        matInput 
        [(ngModel)]="reporte.detalle" 
        name="detalle"
        rows="3"
        required
        placeholder="Proporciona m치s detalles..."
      ></textarea>
      <mat-error>Este campo es obligatorio</mat-error>
    </mat-form-field>

    <mat-dialog-actions align="end">
      <button mat-button type="button" (click)="cerrar()" [disabled]="loading">
        Cancelar
      </button>
      <button 
        mat-raised-button 
        color="warn" 
        type="submit"
        [disabled]="!esValido() || loading"
      >
        <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
        <span *ngIf="!loading">Enviar reporte</span>
      </button>
    </mat-dialog-actions>
  </form>
</mat-dialog-content>